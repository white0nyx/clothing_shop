{% extends 'shop/base.html' %}

{% block content %}
<div class = "product-name">
    <h2>{{ item }}</h2>
</div>

<div class = "product-content">
    <div class="slider-container">
        <button class="slider-prev">ü¢ê</button>
        <div class = "product-slide">
            <div class="slide-line">
                <img src="{{ item.main_photo.url }}" class="product-photo">
                <img src="{{ item.main_photo.url }}" class="product-photo">
                <img src="{{ item.main_photo.url }}" class="product-photo">
            </div>
        </div>
        <button class="slider-next"> ü¢í</button>
    </div>

    <script>
        let offset = 0;
        const sliderLine = document.querySelector('.slide-line');

        document.querySelector('.slider-next').addEventListener('click', function(){
            offset = offset + 362;
            if (offset > 724) {
                offset = 0;
            }
            sliderLine.style.left = -offset + 'px';
        });

        document.querySelector('.slider-prev').addEventListener('click', function () {
            offset = offset - 362;
            if (offset < 0) {
                offset = 724;
            }
            sliderLine.style.left = -offset + 'px';
        });
    </script>

    <div class = "product-info">
        <div class = "price-product-info-price">
            <div class = "price-current1">
                <span>
                    {{ item.price }}
                    &nbsp
                    –†–£–ë
                </span>
            </div>
        </div>

        <h4>–û–ø–∏—Å–∞–Ω–∏–µ: {{ item.description }}</h4>

        <div class="product-info-sizes">
            <div class="product-info-sizes-title">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–º–µ—Ä:</div>
            <div class="product-info-sizes-list">
                <div class="product-info-sizes-list-content">
                    <button type="button" class="product-info-sizes-size"id="smb">S</button>
                    <button type="button" class="product-info-sizes-size">M</button>
                    <button type="button" class="product-info-sizes-size">L</button>
                    <button type="button" class="product-info-sizes-size">XL</button>
                    <button type="button" class="product-info-sizes-size">2XL</button>
                </div>
            </div>
        </div>

        <script>
            document.querySelector('#smb').onclick = function(){
                alert('–ù–µ –∑–∞–≤—Å—Ç–∞–≤–ª—è–π—Ç–µ –º–µ–Ω—è –±–æ–ª—å—à–µ —É—á–∏—Ç—å –¥–∂–∞–≤–∞—Å–∫—Ä–∏–ø—Ç')
            }
        </script>

        <div class="product-info-count-counter">
            <div class="product-info-count-title">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</div>
            <div class = "counter" data-counter>
                <div class = "counter_button counter_button_minus">-</div>
                <div class = counter_input><input value="1" type="text" disabled></div>
                <div class = "counter_button counter_button_plus">+</div>
            </div>
        </div>

        <script>
            const counters = document.querySelectorAll('[data-counter]');

            if (counters) {
                counters.forEach(counter => {
                    counter.addEventListener('click', e => {
                        const target = e.target;

                        if (target.closest('.counter_button')) {
                            if (target.closest('.counter').querySelector('input').value == '' && (target.classList.contains('counter_button_minus') || target.classList.contains('counter_button_plus'))) {
                                target.closest('.counter').querySelector('input').value = 0;
                            }

                            let value = parseInt(target.closest('.counter').querySelector('input').value);

                            if (target.classList.contains('counter_button_plus')) {
                                value++;
                            } else {
                                --value;
                            }

                            if (value <= 0) {
                                value = 0;
                                target.closest('.counter').querySelector('.counter_button_minus').classList.add('disabled')
                            } else {
                                target.closest('.counter').querySelector('.counter_button_minus').classList.remove('disabled')
                            }

                            target.closest('.counter').querySelector('input').value = value;
                        }
                    })
                })
            }
        </script>

        <button type="button" class="category-product-name1">
            <span>–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</span>
        </button>
    </div>
</div>
{% endblock %}